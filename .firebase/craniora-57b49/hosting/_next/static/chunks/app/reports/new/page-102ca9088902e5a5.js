(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[226],{5670:function(e,a,r){Promise.resolve().then(r.bind(r,4939))},4939:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return x}});var s=r(7437),t=r(605),n=r(2265),l=r(9376),i=r(1817),d=r(6865),o=r(5053);let c=(0,r(166).default)(()=>Promise.all([r.e(212),r.e(811)]).then(r.bind(r,2811)),{loadableGenerated:{webpack:()=>[2811]},ssr:!1,loading:()=>(0,s.jsx)("div",{className:"h-[300px] bg-gray-100 rounded-lg flex items-center justify-center",children:(0,s.jsx)(i.Z,{className:"w-8 h-8 animate-spin text-gray-400"})})}),u=[{value:"BANJIR",label:"Banjir",emoji:"\uD83C\uDF0A"},{value:"GEMPA",label:"Gempa Bumi",emoji:"\uD83C\uDFDA️"},{value:"KEBAKARAN",label:"Kebakaran",emoji:"\uD83D\uDD25"},{value:"LONGSOR",label:"Tanah Longsor",emoji:"⛰️"},{value:"TSUNAMI",label:"Tsunami",emoji:"\uD83C\uDF0A"},{value:"ANGIN_TOPAN",label:"Angin Topan",emoji:"\uD83C\uDF2A️"},{value:"KEKERINGAN",label:"Kekeringan",emoji:"☀️"},{value:"LAINNYA",label:"Lainnya",emoji:"❓"}],m=[{value:"RINGAN",label:"Ringan",color:"bg-green-500",description:"Kerusakan minimal, tidak ada korban"},{value:"SEDANG",label:"Sedang",color:"bg-yellow-500",description:"Kerusakan moderat, beberapa korban luka"},{value:"BERAT",label:"Berat",color:"bg-orange-500",description:"Kerusakan besar, banyak korban"},{value:"KRITIS",label:"Kritis",color:"bg-red-500",description:"Situasi darurat, butuh bantuan segera"}];function b(){let e=(0,l.useRouter)(),[a,r]=(0,n.useState)(!1),[t,o]=(0,n.useState)(null),[b,x]=(0,n.useState)({type:"",title:"",description:"",severity:"",latitude:0,longitude:0,address:""}),[h,p]=(0,n.useState)(),g=async a=>{if(a.preventDefault(),o(null),!b.type){o("Pilih jenis bencana");return}if(!b.title||b.title.length<5){o("Judul minimal 5 karakter");return}if(!b.description||b.description.length<20){o("Deskripsi minimal 20 karakter");return}if(!b.severity){o("Pilih tingkat keparahan");return}if(!h){o("Pilih lokasi pada peta");return}r(!0);try{let a=await fetch("/api/reports",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)}),r=await a.json();if(!r.success)throw Error(r.error||"Gagal membuat laporan");e.push("/reports/".concat(r.data.id))}catch(e){o(e instanceof Error?e.message:"Terjadi kesalahan")}finally{r(!1)}};return(0,s.jsxs)("form",{onSubmit:g,className:"space-y-6",children:[t&&(0,s.jsxs)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center gap-2",children:[(0,s.jsx)(d.Z,{className:"w-5 h-5"}),(0,s.jsx)("span",{children:t})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Jenis Bencana *"}),(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:u.map(e=>(0,s.jsxs)("button",{type:"button",onClick:()=>x(a=>({...a,type:e.value})),className:"p-3 rounded-lg border-2 transition-all text-center ".concat(b.type===e.value?"border-primary-500 bg-primary-50 text-primary-700":"border-gray-200 hover:border-gray-300 bg-white"),children:[(0,s.jsx)("span",{className:"text-2xl block mb-1",children:e.emoji}),(0,s.jsx)("span",{className:"text-sm font-medium",children:e.label})]},e.value))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:"Judul Laporan *"}),(0,s.jsx)("input",{type:"text",id:"title",value:b.title,onChange:e=>x(a=>({...a,title:e.target.value})),placeholder:"Contoh: Banjir di Jl. Sudirman",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all",maxLength:200})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Deskripsi Detail *"}),(0,s.jsx)("textarea",{id:"description",value:b.description,onChange:e=>x(a=>({...a,description:e.target.value})),placeholder:"Jelaskan kondisi bencana, kerusakan, korban, kebutuhan bantuan, dll.",rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all resize-none"}),(0,s.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[b.description.length,"/500 karakter"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tingkat Keparahan *"}),(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:m.map(e=>(0,s.jsxs)("button",{type:"button",onClick:()=>x(a=>({...a,severity:e.value})),className:"p-3 rounded-lg border-2 transition-all text-left ".concat(b.severity===e.value?"border-primary-500 bg-primary-50":"border-gray-200 hover:border-gray-300 bg-white"),children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(e.color)}),(0,s.jsx)("span",{className:"font-medium text-sm",children:e.label})]}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:e.description})]},e.value))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Lokasi Bencana *"}),(0,s.jsx)(c,{value:h,onChange:e=>{p({lat:e.lat,lng:e.lng}),x(a=>({...a,latitude:e.lat,longitude:e.lng,address:e.address||""}))}}),b.address&&(0,s.jsxs)("p",{className:"text-sm text-gray-600 mt-2",children:["\uD83D\uDCCD ",b.address]})]}),(0,s.jsx)("button",{type:"submit",disabled:a,className:"w-full bg-gradient-to-r from-danger-500 to-danger-600 text-white py-4 rounded-lg font-semibold hover:from-danger-600 hover:to-danger-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:a?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.Z,{className:"w-5 h-5 animate-spin"}),(0,s.jsx)("span",{children:"Mengirim..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.Z,{className:"w-5 h-5"}),(0,s.jsx)("span",{children:"Kirim Laporan Bencana"})]})})]})}function x(){let{data:e,status:a}=(0,t.useSession)(),r=(0,l.useRouter)();return((0,n.useEffect)(()=>{"unauthenticated"===a&&r.push("/login")},[a,r]),"loading"===a)?(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)(o.Navbar,{}),(0,s.jsx)("div",{className:"flex items-center justify-center h-[60vh]",children:(0,s.jsx)(i.Z,{className:"w-8 h-8 animate-spin text-primary-500"})})]}):(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)(o.Navbar,{}),(0,s.jsxs)("main",{className:"max-w-3xl mx-auto px-4 py-8",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-danger-100 rounded-full mb-4",children:(0,s.jsx)(d.Z,{className:"w-8 h-8 text-danger-600"})}),(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Laporkan Bencana"}),(0,s.jsx)("p",{className:"text-gray-600 mt-2",children:"Isi formulir berikut untuk melaporkan kejadian bencana di sekitar Anda"})]}),(0,s.jsx)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6 md:p-8",children:(0,s.jsx)(b,{})}),(0,s.jsxs)("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-xl p-4",children:[(0,s.jsx)("h3",{className:"font-semibold text-blue-800 mb-2",children:"\uD83D\uDCA1 Tips Pelaporan"}),(0,s.jsxs)("ul",{className:"text-sm text-blue-700 space-y-1",children:[(0,s.jsx)("li",{children:"• Pastikan lokasi yang ditandai akurat"}),(0,s.jsx)("li",{children:"• Berikan deskripsi sejelas mungkin"}),(0,s.jsx)("li",{children:"• Sebutkan jika ada korban atau kebutuhan mendesak"}),(0,s.jsx)("li",{children:"• Lampirkan foto jika memungkinkan"})]})]})]})]})}}},function(e){e.O(0,[976,605,240,971,117,744],function(){return e(e.s=5670)}),_N_E=e.O()}]);